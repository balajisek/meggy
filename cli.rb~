require 'rubygems'
require 'mixlib/cli'
#require 'asciimo'
#require 'nm/command'
module Nm
class CLI
  include Mixlib::CLI
#Asciimo.text("Star_Wars.flf", "Nilam-Megam", "yellow")
puts "mycli"


OptionParser.new do |o|
	puts o.default_argv
  o.banner = "Usage: mucli.rb [options]"
	if 
  o.on('-s', '--login', 'Megam Login') { com.run }
  o.on('-ci', '--create_identity', 'Create a new identity') { com.run }
  o.on('-li', '--list_identity', 'List all the identities') { com.run }
  o.on('-di', '--deleteidentity', 'Delete an identity') { com.run }
  o.parse!
end


  option :config_file, 
    :short => "-c CONFIG",
    :long  => "--config CONFIG",
    :default => 'conf.rb',
    :description => "The configuration file to use"
com = Nm::Command.new

option :help,
    :short => "-h",
    :long => "--help",
    :description => "Show this message",
    :on => :tail,
    :boolean => true,
    :show_options => true,
    :exit => 0

  option :login, 
    :short => "-l",
    :long => "-login",
    :description => "Login details",
	:required => true,
	:proc => com.login

  option :identity_create, 
    :long  => "--identity_create ACCOUNT_NAME",
    :description => "Create Identity"


  option :identity_list, 
    :long  => "--identity_list USERNAME",
    :description => "List Identity"

  option :identity_delete, 
    :long  => "--identity_delete ACCOUNT_NAME",
    :description => "Delete Identity"

end



# ARGV = [ '-c', 'foo.rb', '-l', 'debug' ]
cli = MyCLI.new
cli.parse_options
cli.config[:config_file] # 'foo.rb'
puts cli.config[:config_file]
puts "logged in"
puts "welcome user"

end #module
